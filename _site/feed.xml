<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>xiaotan</title>
    <description>欢迎来到我的个人站~</description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Thu, 18 Apr 2019 21:12:02 +0800</pubDate>
    <lastBuildDate>Thu, 18 Apr 2019 21:12:02 +0800</lastBuildDate>
    <generator>Jekyll v3.8.5</generator>
    
      <item>
        <title>JSON支持Unicode</title>
        <description>&lt;blockquote&gt;
  &lt;p&gt;为了让自己的JSON库可以识别utf-8编码，然后添加JSON支持Unicode，主要记录了JSON库的学习过程,方便以后进行查阅，算是知识累积的一种方法吧。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;主要学习内容：&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;##1.-Unicode-相关知识&quot;&gt;Unicode相关知识&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;##2.-utf-8-相关知识&quot;&gt;utf-8相关知识&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;1-unicode-相关知识&quot;&gt;1. Unicode 相关知识&lt;/h2&gt;

&lt;p&gt;Unicode 是一套多语言的统一&lt;strong&gt;编码系统&lt;/strong&gt;，收录 135 种语言共 128237 个字符，这些字符被收录为统一的字符集（Universal Coded Character Set, UCS）,每个字符被映射为一个整数码点，码点的范围是 &lt;strong&gt;0-10FFFF&lt;/strong&gt; ，码点又通常记作 &lt;strong&gt;U+XXXX&lt;/strong&gt;，当中 XXXX 为 16 进位数字。&lt;/p&gt;

&lt;p&gt;由于 Unicode 无法想 ASSIC 码这样以一个字节存储，因此 Unicode 制定了各种存储码点的方式，这种方式称为 Unicode 转换格式（Uniform Transformation Format, UTF）。现时流行的 UTF 为 UTF-8、UTF-16 和 UTF-32。每种 UTF 会把一个码点储存为一至多个编码单元（code unit）。例如 UTF-8 的编码单元是 8 位的字节、UTF-16 为 16 位、UTF-32 为 32 位。除 UTF-32 外，UTF-8 和 UTF-16 都是可变长度编码。&lt;/p&gt;

&lt;h2 id=&quot;2-utf-8-相关知识&quot;&gt;2. utf-8 相关知识&lt;/h2&gt;

&lt;h3 id=&quot;urf-8-的优势&quot;&gt;urf-8 的优势&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;它采用字节为编码单元，不会有字节序（endianness）的问题。&lt;/li&gt;
  &lt;li&gt;每个 ASCII 字符只需一个字节去储存。&lt;/li&gt;
  &lt;li&gt;如果程序原来是以字节方式储存字符，理论上不需要特别改动就能处理 UTF-8 的数据。&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;utf-8-的编码方式&quot;&gt;UTF-8 的编码方式&lt;/h3&gt;

&lt;p&gt;UTF-8 的编码单元为 8 位（1 字节），每个码点编码成 1 至 4 个字节。它的编码方式很简单，按照码点的范围，把码点的二进位分拆成 1 至最多 4 个字节：&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;码点范围&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;码点位数&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;字节1&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;字节2&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;字节3&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;字节4&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;U+0000 ~ U+007F&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;7&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;0xxxxxxx&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;U+0080 ~ U+07FF&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;11&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;110xxxxx&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;10xxxxxx&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;U+0800 ~ U+FFFF&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;16&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;1110xxxx&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;10xxxxxx&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;10xxxxxx&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;U+10000 ~ U+10FFFF&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;21&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;11110xxx&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;10xxxxxx&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;10xxxxxx&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;10xxxxxx&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;这个编码方法的好处之一是，码点范围 U+0000 ~ U+007F 编码为一个字节，与 ASCII 编码兼容。这范围的 Unicode 码点也是和 ASCII 字符相同的。因此，一个 ASCII 文本也是一个 UTF-8 文本&lt;/p&gt;

&lt;h3 id=&quot;代码实现&quot;&gt;代码实现&lt;/h3&gt;

&lt;p&gt;解析多字符C语言代码:&lt;/p&gt;

&lt;div class=&quot;language-c highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x0800&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xFFFF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;OutputByte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0xE0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* 0xE0 = 11100000 */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;OutputByte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x80&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;u&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt;  &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x3F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* 0x80 = 10000000 */&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;OutputByte&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mh&quot;&gt;0x80&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;        &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0x3F&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* 0x3F = 00111111 */&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Wed, 17 Apr 2019 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2019/04/JSON-Unicode/</link>
        <guid isPermaLink="true">http://localhost:4000/2019/04/JSON-Unicode/</guid>
        
        <category>JSON</category>
        
        
      </item>
    
  </channel>
</rss>
